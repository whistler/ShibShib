class Post < ActiveRecord::Base
  after_save :update_vote_count
  
  extend FriendlyId
  friendly_id :title, use: [:slugged, :history]

  acts_as_voteable
  belongs_to :user
  has_many :ratings
  

  
  def self.feed(last)
		self.where("created_at < ? ", last).order('created_at desc').limit(5)
  end
  
  validates_presence_of :title
  #validates_attachment_presence :image
  #validates_attachment_size :image, :less_than=>2.megabyte, :if => Proc.new { |imports| !imports.image_file_name.blank? }
  
  def update_vote_count
    self.vote_count = self.plusminus
  end
end
